<%- layout("/layouts/boilerplate.ejs") %>


<button class="back-button" onclick="goBack()">
  <i class="fas fa-arrow-left"></i>
</button>

<div class="login-container">
  <div class="login-wrapper">
    <div class="login-content">
      <div class="login-header">
        <i class="fas fa-user-plus"></i>
        <h2>Create Account</h2>
        <p>Join our community of property seekers</p>
      </div>

      <form action="/signup" method="POST" class="login-form needs-validation" novalidate>
        <div class="form-group">
          <label for="username">
            <i class="fas fa-user"></i>
            Username
          </label>
          <input
            name="username"
            id="username"
            type="text"
            class="form-control"
            placeholder="Choose a username"
            required
          />
        </div>

        <div class="form-group">
          <label for="email">
            <i class="fas fa-envelope"></i>
            Email
          </label>
          <input
            name="email"
            id="email"
            type="email"
            class="form-control"
            placeholder="Enter your email"
            required
          />
          <div class="invalid-feedback">Please enter a valid email address!</div>
        </div>

        <div class="form-group">
          <label for="password">
            <i class="fas fa-lock"></i>
            Password
          </label>
          <div class="password-input">
            <input
              name="password"
              id="password"
              type="password"
              class="form-control"
              placeholder="Create a strong password"
              required
            />
            <i class="fas fa-eye-slash toggle-password"></i>
          </div>
        </div>

        <div class="form-group">
          <label for="confirmPassword">
            <i class="fas fa-lock"></i>
            Confirm Password
          </label>
          <div class="password-input">
            <input
              name="confirmPassword"
              id="confirmPassword"
              type="password"
              class="form-control"
              placeholder="Confirm your password"
              required
            />
            <i class="fas fa-eye-slash toggle-password"></i>
          </div>
        </div>

        <div class="form-options">
          <div class="form-check">
            <input type="checkbox" class="form-check-input" id="terms" required>
            <label class="form-check-label" for="terms">
              I agree to the <a href="#" class="terms-link">Terms & Conditions</a>
            </label>
          </div>
        </div>

        <button type="submit" class="login-btn">
          <i class="fas fa-user-plus"></i>
          Create Account
        </button>

        <div class="register-link">
          <p>Already have an account? <a href="/login">Login here</a></p>
        </div>
      </form>
    </div>

    <div class="login-image">
      <img src="https://images.unsplash.com/photo-1522708323590-d24dbb6b0267" alt="Signup Background">
      <div class="image-overlay">
        <h3>Start Your Journey</h3>
        <p>Join thousands of satisfied tenants who found their perfect accommodation through us.</p>
      </div>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Toggle password visibility for both password fields
  const togglePasswordButtons = document.querySelectorAll('.toggle-password');
  const passwordInputs = document.querySelectorAll('input[type="password"]');

  togglePasswordButtons.forEach((button, index) => {
    button.addEventListener('click', function() {
      const type = passwordInputs[index].getAttribute('type') === 'password' ? 'text' : 'password';
      passwordInputs[index].setAttribute('type', type);
      this.classList.toggle('fa-eye');
      this.classList.toggle('fa-eye-slash');
    });
  });

  // Form validation
  const form = document.querySelector('.login-form');
  form.addEventListener('submit', function(event) {
    if (!form.checkValidity()) {
      event.preventDefault();
      event.stopPropagation();
    }
    form.classList.add('was-validated');
  });

  // Password match validation
  const password = document.getElementById('password');
  const confirmPassword = document.getElementById('confirmPassword');

  function validatePassword() {
    if (password.value !== confirmPassword.value) {
      confirmPassword.setCustomValidity("Passwords don't match");
    } else {
      confirmPassword.setCustomValidity('');
    }
  }

  password.addEventListener('change', validatePassword);
  confirmPassword.addEventListener('keyup', validatePassword);
});

function goBack() {
  window.history.back();
}
</script>
